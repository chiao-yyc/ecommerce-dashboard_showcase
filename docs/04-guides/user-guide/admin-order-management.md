# 管理員訂單管理操作指南

## 概述

本指南說明管理員如何使用訂單管理系統進行訂單狀態管理，包括單一訂單操作和批量處理。

## 訂單狀態說明

### 狀態流程圖

```
訂單建立 → 待處理 → 已確認 → 已付款 → 處理中 → 已出貨 → 已送達 → 已完成
                ↓        ↓        ↓        ↓        ↓
              已取消 ← 已取消 ← 已取消 ← 已取消 ← 已取消
                ↓
              已退款
```

### 各狀態詳細說明

| 狀態 | 說明 | 下個步驟 | 注意事項 |
|-----|------|---------|----------|
| **待處理** | 訂單已建立，等待確認 | 確認訂單 / 取消訂單 | 可直接取消，不影響庫存 |
| **已確認** | 訂單已確認，等待付款 | 標記付款 / 取消訂單 | 取消時需考慮退款 |
| **已付款** | 付款完成，準備處理 | 開始處理 / 取消訂單 | 取消時需安排退款 |
| **處理中** | 正在準備商品 | 標記出貨 / 取消訂單 | 準備包裝和物流 |
| **已出貨** | 商品已發送 | 確認送達 | 需要物流追蹤號碼 |
| **已送達** | 商品已送達客戶 | 完成訂單 | 等待客戶確認 |
| **已完成** | 交易完成 | 無 | 最終狀態 |
| **已取消** | 訂單已取消 | 處理退款 | 庫存已釋放 |
| **已退款** | 退款已完成 | 無 | 最終狀態 |

## 單一訂單操作

### 1. 查看訂單列表
1. 進入訂單管理頁面
2. 使用狀態篩選器找到特定狀態的訂單
3. 使用搜尋功能查找特定訂單

### 2. 變更訂單狀態

#### 操作步驟
1. 在訂單列表中找到目標訂單
2. 點擊該訂單列的「操作」按鈕（三個點圖示）
3. 選擇「設定狀態」
4. 系統會顯示當前狀態的有效下個步驟
5. 選擇目標狀態
6. 在確認對話框中檢查轉換詳情
7. 如需要，填寫額外資訊（如物流單號）
8. 點擊「確認變更」

#### 狀態轉換說明

**待處理 → 已確認**
- **目的**：確認此訂單，標示為已確認狀態
- **後果**：可進行後續付款處理
- **注意**：確認後較難取消

**已確認 → 已付款**
- **目的**：標記此訂單為已付款
- **後果**：系統將自動處理付款記錄
- **注意**：需確保實際已收到款項

**已付款 → 處理中**
- **目的**：開始處理此訂單，準備商品和包裝
- **後果**：進入商品準備階段
- **注意**：檢查庫存是否充足

**處理中 → 已出貨**
- **目的**：標記商品已出貨
- **必填**：物流追蹤號碼
- **後果**：客戶可開始追蹤商品
- **注意**：確保商品已實際寄出

**已出貨 → 已送達**
- **目的**：確認商品已送達客戶
- **後果**：等待客戶確認收貨
- **注意**：可能需要客戶確認

**已送達 → 已完成**
- **目的**：完成此筆交易
- **後果**：訂單進入最終完成狀態
- **注意**：通常在客戶確認後執行

### 3. 取消訂單

#### 不同狀態下的取消處理

**待處理狀態取消**
- 直接取消，不影響庫存
- 無需退款處理

**已確認狀態取消**
- 釋放預留庫存
- 如有預付款需安排退款

**已付款狀態取消**
- 需要安排全額退款
- 系統會標記為需要退款

**處理中狀態取消**
- 停止商品準備
- 安排退款並釋放庫存

#### 取消操作步驟
1. 選擇「已取消」狀態
2. 系統會顯示取消警告訊息
3. 確認取消原因和後果
4. 點擊「確認取消」
5. 如需要，後續處理退款

## 批量操作

### 1. 選擇多筆訂單
1. 在訂單列表中使用核取方塊選擇多筆訂單
2. 表頭會顯示批量操作按鈕
3. 所選訂單數量會顯示在按鈕上

### 2. 批量狀態變更

#### 操作步驟
1. 選擇要操作的多筆訂單
2. 點擊表頭的批量操作按鈕
3. 選擇「設定狀態」
4. 選擇目標狀態
5. 系統會分析所有選中的訂單：
   - **可執行**：符合轉換規則的訂單
   - **無法執行**：不符合轉換規則的訂單
6. 檢查分析結果和統計資料
7. 確認批量變更

#### 批量分析結果

系統會顯示：
- **統計摘要**：可執行、無法執行、總計數量
- **狀態分布**：當前狀態的訂單分布情況
- **無法執行詳情**：列出無法執行的訂單和原因

#### 注意事項
- 只有符合轉換規則的訂單會被執行
- 無法執行的訂單會保持原狀態
- 批量操作前會顯示詳細的預覽報告

## 錯誤處理

### 常見錯誤情況

#### 1. 無效的狀態轉換
**錯誤訊息**：「無效的狀態轉換：從 [當前狀態] 到 [目標狀態]」
**解決方法**：
- 檢查狀態轉換流程圖
- 選擇正確的下個步驟
- 如有疑問，聯絡系統管理員

#### 2. 缺少必填欄位
**錯誤訊息**：「缺少必填欄位：[欄位名稱]」
**解決方法**：
- 填寫所需的資訊（如物流單號）
- 確保資訊正確無誤
- 重新提交轉換

#### 3. 業務規則限制
**錯誤訊息**：「Cannot mark as paid without completed payment」
**解決方法**：
- 檢查是否有對應的付款記錄
- 確認付款已實際完成
- 聯絡財務部門確認

### 操作建議

#### 1. 訂單處理最佳實務
- **確認前仔細檢查**：訂單內容、客戶資訊、商品庫存
- **及時更新狀態**：避免狀態與實際情況不符
- **記錄重要資訊**：如物流單號、特殊處理需求
- **定期檢查進度**：避免訂單在某個狀態停留過久

#### 2. 批量操作注意事項
- **小批量測試**：首次使用時先選擇少量訂單測試
- **仔細檢查結果**：確認分析報告的合理性
- **分類處理**：相同狀態的訂單一起處理效率更高
- **錯誤處理**：對無法執行的訂單單獨處理

#### 3. 異常情況處理
- **系統錯誤**：刷新頁面後重試，如持續發生請聯絡技術支援
- **狀態不同步**：檢查網路連線，必要時重新載入訂單資料
- **權限問題**：確認帳號有足夠的操作權限

## 快捷鍵和操作技巧

### 鍵盤快捷鍵
- `Ctrl/Cmd + A`：全選當前頁面的訂單
- `Esc`：關閉對話框
- `Enter`：在對話框中確認操作

### 操作技巧
1. **快速篩選**：使用狀態篩選器快速找到特定狀態的訂單
2. **狀態排序**：點擊狀態欄位標題按狀態排序
3. **批量選擇**：按住 Shift 鍵點擊可選擇範圍內的訂單
4. **搜尋功能**：使用訂單編號或客戶資訊快速定位

## 常見問題 (FAQ)

### Q: 為什麼某些狀態選項是灰色的？
A: 灰色的選項表示從當前狀態無法直接轉換到該狀態。請按照正常的業務流程逐步轉換。

### Q: 批量操作時為什麼有些訂單無法執行？
A: 通常是因為這些訂單的當前狀態不符合轉換規則。請檢查「無法執行詳情」中的具體原因。

### Q: 如何撤銷錯誤的狀態變更？
A: 大多數狀態變更無法直接撤銷。請根據實際情況選擇適當的下個狀態，或聯絡系統管理員。

### Q: 為什麼標記為「已出貨」時需要物流單號？
A: 物流單號是客戶追蹤商品的重要資訊，系統要求必須填寫以確保服務品質。

### Q: 可以跳過某些狀態直接到最終狀態嗎？
A: 為了確保業務流程的完整性，系統要求按順序執行狀態轉換。特殊情況請聯絡主管處理。

---

如有其他問題或需要額外支援，請聯絡系統管理員或技術支援團隊。